Update

A few bug fixes
